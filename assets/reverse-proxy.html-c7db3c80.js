import{_ as l,r as o,o as p,c,b as e,e as n,a as s,w as r,f as i}from"./app-5f335197.js";const d={},u=e("h1",{id:"reverse-proxy",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#reverse-proxy","aria-hidden":"true"},"#"),n(" Reverse proxy")],-1),h=e("code",null,"reverse proxy",-1),v={class:"hint-container tip"},m=e("p",{class:"hint-container-title"},"Can't play video when reverse-proxy non-standard ports or enable https?",-1),_={href:"https://github.com/alist-org/alist/issues/726",target:"_blank",rel:"noopener noreferrer"},g={href:"https://github.com/alist-org/alist/issues/1159",target:"_blank",rel:"noopener noreferrer"},f={href:"https://github.com/alist-org/alist/issues/2429",target:"_blank",rel:"noopener noreferrer"},k={href:"https://github.com/alist-org/alist/issues/3644",target:"_blank",rel:"noopener noreferrer"},b={href:"https://github.com/alist-org/alist/issues/4181",target:"_blank",rel:"noopener noreferrer"},x={href:"https://github.com/alist-org/alist/issues/4719",target:"_blank",rel:"noopener noreferrer"},y=i(`<h3 id="nginx" tabindex="-1"><a class="header-anchor" href="#nginx" aria-hidden="true">#</a> <strong>nginx</strong></h3><p>Add in the server field of the website configuration file</p><div class="language-nginx line-numbers-mode" data-ext="nginx"><pre class="language-nginx"><code><span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Forwarded-Proto <span class="token variable">$scheme</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> Host <span class="token variable">$http_host</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> X-Real-IP <span class="token variable">$remote_addr</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_set_header</span> Range <span class="token variable">$http_range</span></span><span class="token punctuation">;</span>
	  <span class="token directive"><span class="token keyword">proxy_set_header</span> If-Range <span class="token variable">$http_if_range</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_redirect</span> <span class="token boolean">off</span></span><span class="token punctuation">;</span>
    <span class="token directive"><span class="token keyword">proxy_pass</span> http://127.0.0.1:5244</span><span class="token punctuation">;</span>
    <span class="token comment"># the max size of file to upload</span>
    <span class="token directive"><span class="token keyword">client_max_body_size</span> <span class="token number">20000m</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),w={class:"hint-container warning"},S=e("p",{class:"hint-container-title"},"Note",-1),P={href:"http://bt.cn",target:"_blank",rel:"noopener noreferrer"},A=e("ul",null,[e("li",null,"location ~ ^/(.user.ini|.htaccess|.git|.svn|.project|LICENSE|README.md"),e("li",null,"location ~ .*.(gif|jpg|jpeg|png|bmp|swf)$"),e("li",null,"location ~ .*.(js|css)?$")],-1),I=i(`<h3 id="apache" tabindex="-1"><a class="header-anchor" href="#apache" aria-hidden="true">#</a> <strong>Apache</strong></h3><p>Add the anti-generation configuration item ProxyPass under the VirtualHost field, such as:</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VirtualHost</span> <span class="token attr-name"><span class="token namespace">*:</span>80</span><span class="token punctuation">&gt;</span></span>
    ServerName myapp.example.com
    ServerAdmin webmaster@example.com
    DocumentRoot /www/myapp/public

    AllowEncodedSlashes NoDecode
    ProxyPass &quot;/&quot; &quot;http://127.0.0.1:5244/&quot; nocanon
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>VirtualHost</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="caddy" tabindex="-1"><a class="header-anchor" href="#caddy" aria-hidden="true">#</a> <strong>Caddy</strong></h3><p>Add the reverse_proxy configuration item reverse_proxy under the Caddyfile file, for example:</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>:80 {
     reverse_proxy 127.0.0.1:5244
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="a-simple-demonstration-of-setting-up-a-reverse-proxy-in-pagoda" tabindex="-1"><a class="header-anchor" href="#a-simple-demonstration-of-setting-up-a-reverse-proxy-in-pagoda" aria-hidden="true">#</a> <strong>A simple demonstration of setting up a reverse proxy in Pagoda</strong></h3><p>First create a new site, <strong>Alist Launcher</strong> does not matter whether it is in the site folder, and then add it as shown in the figure below.</p><ul><li><mark>Also, if you want to use Pagoda to open <strong>SSL(HTTPS)</strong>, you need to add it before the reverse proxy, otherwise you cannot open SSL</mark></li><li>If you have already added a reverse proxy, you can stop it first <strong>(the one in the picture that turns on the proxy button can just turn it off)</strong>, enable SSL and then turn on the reverse proxy</li></ul><p><img src="https://alist-doc.nn.ci/assets/images/BT-Proxy-5913c3786afba1417362c71f0af73ea9.png" alt="BT"></p>`,10);function L(E,N){const t=o("RouterLink"),a=o("ExternalLinkIcon");return p(),c("div",null,[u,e("p",null,[n("The program listens to port 5244 by default. If you do "),h,n(", recommended you set "),s(t,{to:"/config/configuration.html#site_url"},{default:r(()=>[n("site_url")]),_:1}),n(" so that alist can works fine.")]),e("blockquote",null,[e("p",null,[n("If you want to use a sub folder, refer to "),s(t,{to:"/faq/howto.html#how-to-reverse-proxy-with-sub-directory"},{default:r(()=>[n("reverse proxy with sub folder")]),_:1})])]),e("div",v,[m,e("p",null,[n("You need to passed correct host header, refer to "),e("a",_,[n("#726"),s(a)]),n(),e("a",g,[n("#1159"),s(a)]),n(),e("a",f,[n("#2429"),s(a)]),n(),e("a",k,[n("#3644"),s(a)]),n(),e("a",b,[n("#4181"),s(a)]),n(),e("a",x,[n("#4719"),s(a)])])]),y,e("div",w,[S,e("p",null,[n("If you use the "),e("a",P,[n("bt.cn"),s(a)]),n(", be sure to delete the following default configuration")]),A]),I])}const $=l(d,[["render",L],["__file","reverse-proxy.html.vue"]]);export{$ as default};
